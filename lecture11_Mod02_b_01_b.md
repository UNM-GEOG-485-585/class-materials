<!---------------------------------------------------------------------------->
<!-- Week 11 ----------------------------------------------------------------->
<!-- Lecture 02 b 01 b ------------------------------------------------------->
<!-- Web-based Mapping Clients------------------------------------------------>
<!-- OpenLayers Javascript Framework------------------------------------------>
<!---------------------------------------------------------------------------->


# Week 11 - Module 2b - OpenLayers Javascript Framework# {.module02b01b}

### Overview ###  {.module02b01b}

* More detailed Map Object Options

* More detailed Layer Object Options

* Additional Map Layer Types - With Examples



### Map Object Options ###

* Map Object Options [API Reference](http://openlayers.org/en/v3.14.2/apidoc/ol.Map.html)
* View Object Options [API Reference](http://openlayers.org/en/v3.14.2/apidoc/ol.View.html)
* Layer Object Options
	* `ol.layer.Tile` [API Reference](http://openlayers.org/en/v3.14.2/apidoc/ol.layer.Tile.html)
	* `ol.layer.Image` [API Reference](http://openlayers.org/en/v3.14.2/apidoc/ol.layer.Image.html)
	* `ol.layer.Vector` [API Reference](http://openlayers.org/en/v3.14.2/apidoc/ol.layer.Vector.html)
	* `ol.layer.VectorTile` [API Reference](http://openlayers.org/en/v3.14.2/apidoc/ol.layer.VectorTile.html)

A variety of strategies for constructing a new `OpenLayers.Map` object

~~~~~~~~~~  {#OpenLayers_02_Map_options .html .numberLines}
// create a map with minimum required elements and default 
// options in an element with the id "map1"
var map = new ol.Map({
	target:'map1',
	// a map without layers can be defined and in that case a map with no layers
	// will be rendered
	layers: [ 
		new ol.layer.Tile({
			source: new ol.source.MapQuest({layer: 'osm'})
		}) 
	], // end layers
	view: new ol.View({
		center: [0, 0],
		zoom: 1
	}), //end view
});

// create a map with options specified in a separate 'options' variable and
// included by reference in the code to create the new map object
var options = {
	// required options
	target:'map2',
	layers: ...,
	view: ...,
	
	// optional options - only include those that you need
	controls: ...,
	pixelRatio: ...,
	interactions: ...,
	keyboardEventTarget: ...,
	loadTilesWhileAnimating: ...,
	loadTilesWhileInteracting: ...,
	logo: ...,
	overlays: ...,
	renderer: ...	
};
var map = new ol.Map(options);

// map with non-default options - same as above but with a single argument
var map = new ol.Map({
	// required options
	target:'map2',
	layers: ...,
	view: ...,
	
	// optional options - only include those that you need
	controls: ...,
	pixelRatio: ...,
	interactions: ...,
	keyboardEventTarget: ...,
	loadTilesWhileAnimating: ...,
	loadTilesWhileInteracting: ...,
	logo: ...,
	overlays: ...,
	renderer: ...	
});

// the following commands can be executed to add, set or remove the layers in a map 
// after a map object has been created

map.addLayer(layer)
map.removeLayer(layer)
map.setLayerGroup(layerGroup)

// the view of a layer can be created or modified after the map object has been 
// created by using the following command

map.setView()

// the target DOM object for the map object can be set or changed using 
// the following command

map.setTarget

~~~~~~~~~~	



### Layer Object Options ###

Layer Object Options [API Reference](http://dev.openlayers.org/releases/OpenLayers-2.13/doc/apidocs/files/OpenLayers/Layer-js.html)

Common Pattern of Layer Object Creation (varies some depending upon the specific layer type)

~~~~~~~~~~  {#OpenLayers_02_Layer_options .html .numberLines}
	new OpenLayers.Layer.*** (
		'layer name',
		'layer URL',
		{server-related options}, 
		{OpenLayers Layer Object options}
	)
~~~~~~~~~~  



### Additional Map and Layer Object Functions & Events ###

Both Map and Layer Objects have a number of associated functions as well

* Retrieving object properties programmatically with `Get` functions.
* Modifying existing object properties with `Set` functions
* Map destruction, and reconfiguration
* Linkage of object events with Javascript functions


### WMS Layer Configuration ###

Some key issues to be aware of when using the [WMS Layer Class](http://dev.openlayers.org/releases/OpenLayers-2.13/doc/apidocs/files/OpenLayers/Layer/WMS-js.html):

* The _projection_ of the map object must be supported by the included WMS service (review the WMS GetCapabilities response to see what projections are supported by the service)
* The _layers_ parameter/property must be provided as part of the server-related property list (the layer names also come from the GetCapabilities response)
* Other WMS parameters may be provided as well to "adjust" the request automatically generated by OpenLayers

Sample WMS Layer Object Creation

~~~~~~~~~~  {#OpenLayers_02_WmsLayer_options .html .numberLines}
    countiesLayer = new OpenLayers.Layer.WMS( 
        "US Counties", 
        "http://webservices.nationalatlas.gov/wms?",
        {layers: "counties", version: '1.3.0', transparent: 'TRUE'},
        {isBaseLayer: false, visibility: false, opacity: .8}
    );
    map.addLayer(countiesLayer);
~~~~~~~~~~

[Example](http://karlbenedict.com/GEOG485-585/lectures/examples/openLayers10_wms01.html)


### Vector Layer Configuration ###

Vector layers support

* External Data in a Variety of supported [formats](http://dev.openlayers.org/releases/OpenLayers-2.13/doc/apidocs/files/OpenLayers/Format-js.html) for both _reading_ and _writing_ (just a sample): ArcXML.Features, GeoJSON, GeoRSS, GPX, JSON, KML, WFS, WKT
* Directly encoded [geometries][OpenLayers.Geometry API Link]: Collection, Curve, LinearRing, LineString, MultiLineString, MultiPoint, MultiPolygon, Point, Polygon, Rectangle 
* User created features, including support for interactive editing of features
* [Styling](http://dev.openlayers.org/releases/OpenLayers-2.13/doc/apidocs/files/OpenLayers/Feature/Vector-js.html#OpenLayers.Feature.Vector.style) of Vector features


### Vector Layer Configuration - Continued ###


Vector Layer Objects are Typically Defined using three OpenLayers classes

`Protocol`
:	Connection protocol for requesting the data that would be provided from an external source

`Format`
:	The OpenLayers supported format of the vector data object

`Strategy`
:	A specification of how OpenLayers should request the data from the server, and also handle the data within the client (browser). 


### Vector Layer Configuration - Continued ###

Sample Point Feature Object creation

~~~~~~~~~~  {#OpenLayers_02_VectorLayer_options01 .html .numberLines}
	var Coord_classroom = new OpenLayers.Geometry.Point(-106.624073,35.084280);
	var Point_classroom = new OpenLayers.Feature.Vector(Coord_classroom);
	Layers["localFeatures"].addFeatures([Point_classroom])
~~~~~~~~~~

Sample KML Layer Object creation 

~~~~~~~~~~  {#OpenLayers_02_KMLayer_options01 .html .numberLines}
	Layers.counties = new OpenLayers.Layer.Vector("KML - Counties", {
     	projection: map.displayProjection,
		strategies: [new OpenLayers.Strategy.Fixed()],
		protocol: new OpenLayers.Protocol.HTTP({
			url: "NMCounties.kml",
			format: new OpenLayers.Format.KML({
				extractAttributes: true
			})
		})
	});
	map.addLayer(Layers.counties)
~~~~~~~~~~
		
[Example](http://karlbenedict.com/GEOG485-585/lectures/examples/openLayers11_vectorData_KML.html)

